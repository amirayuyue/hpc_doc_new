<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hpc-tutorials/slurm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">SLURM | UC Merced HPC clusters</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://amirayuyue.github.io/hpc_doc_new/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://amirayuyue.github.io/hpc_doc_new/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://amirayuyue.github.io/hpc_doc_new/docs/hpc-tutorials/slurm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SLURM | UC Merced HPC clusters"><meta data-rh="true" name="description" content="This page serves as point of introduction to understanding and understanding the best use of Slurm."><meta data-rh="true" property="og:description" content="This page serves as point of introduction to understanding and understanding the best use of Slurm."><link data-rh="true" rel="icon" href="/hpc_doc_new/img/cirt.png"><link data-rh="true" rel="canonical" href="https://amirayuyue.github.io/hpc_doc_new/docs/hpc-tutorials/slurm"><link data-rh="true" rel="alternate" href="https://amirayuyue.github.io/hpc_doc_new/docs/hpc-tutorials/slurm" hreflang="en"><link data-rh="true" rel="alternate" href="https://amirayuyue.github.io/hpc_doc_new/docs/hpc-tutorials/slurm" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/hpc_doc_new/blog/rss.xml" title="UC Merced HPC clusters RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/hpc_doc_new/blog/atom.xml" title="UC Merced HPC clusters Atom Feed"><link rel="stylesheet" href="/hpc_doc_new/assets/css/styles.415e2e58.css">
<script src="/hpc_doc_new/assets/js/runtime~main.62f4e648.js" defer="defer"></script>
<script src="/hpc_doc_new/assets/js/main.099fed10.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/hpc_doc_new/"><div class="navbar__logo"><img src="/hpc_doc_new/img/CIRT.png" alt="CIRT Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/hpc_doc_new/img/CIRT.png" alt="CIRT Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/hpc_doc_new/docs/category/hpc-clusters">Tutorial</a><a class="navbar__item navbar__link" href="/hpc_doc_new/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hpc_doc_new/docs/category/hpc-clusters">HPC Clusters</a><button aria-label="Expand sidebar category &#x27;HPC Clusters&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/hpc_doc_new/docs/category/additional-hpc-resources">Additional HPC Resources</a><button aria-label="Collapse sidebar category &#x27;Additional HPC Resources&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hpc_doc_new/docs/hpc-tutorials/OH">HPC Office Hours</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hpc_doc_new/docs/hpc-tutorials/hpc_vocab">HPC Vocabulary and Terminology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/hpc_doc_new/docs/hpc-tutorials/slurm">SLURM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hpc_doc_new/docs/category/off-campus-high-performance-computing-resources">Off Campus High Performance Computing Resources</a><button aria-label="Expand sidebar category &#x27;Off Campus High Performance Computing Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hpc_doc_new/docs/category/running-jobs">Running Jobs</a><button aria-label="Expand sidebar category &#x27;Running Jobs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hpc_doc_new/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Expand sidebar category &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/hpc_doc_new/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/hpc_doc_new/docs/category/additional-hpc-resources"><span itemprop="name">Additional HPC Resources</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SLURM</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SLURM</h1></header><p>This page serves as point of introduction to understanding and understanding the best use of Slurm.</p>
<p>Slurm is a free and open-source job scheduler for Linux and Unix-like kernels, used by many supercomputers and computer clusters.</p>
<p>Slurm serves the purpose of being the scheduler of jobs and the manager of the resources on both, MERCED and Pinnacles clusters. It does it in three ways:</p>
<ul>
<li>Provides exclusive and/or non-exclusive access to the resources on the compute nodes to the users for a certain amount of time.</li>
<li>Provides a framework to start, execute, and check the work on the set of allocated compute nodes.</li>
<li>Slurm manages the queue of pending jobs based on the availability of resources.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slurm-commands">Slurm Commands<a href="#slurm-commands" class="hash-link" aria-label="Direct link to Slurm Commands" title="Direct link to Slurm Commands">​</a></h2>
<p>Basic Slurm Commands to interact via the command line interface with the queueing and resource scheduler are shown below.</p>
<table><thead><tr><th>Commands</th><th>Syntax</th><th>Description</th></tr></thead><tbody><tr><td><code>sbatch</code></td><td><code>sbatch &lt;jobname&gt;</code></td><td>Submit a batch script to Slurm for processing.</td></tr><tr><td><code>squeue</code></td><td><code>squeue --me</code></td><td>Show information about your job(s) in the queue. The command when run without the <code>--me</code> flag, shows all jobs in the queue.</td></tr><tr><td><code>srun</code></td><td><code>srun &lt;option&gt;</code></td><td>Please see our example <a href="/hpc_doc_new/docs/hpc-tutorials/interact_job.md">here</a> for using srun in interactive session.</td></tr><tr><td><code>skill/scancel</code></td><td><code>scancel &lt;job-id&gt;</code></td><td>End or cancel a queued job.</td></tr><tr><td><code>sinfo</code></td><td><code>sinfo</code></td><td>Get information about the resources on available nodes that make up the HPC cluster.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sbatch-command"><code>sbatch</code> Command<a href="#sbatch-command" class="hash-link" aria-label="Direct link to sbatch-command" title="Direct link to sbatch-command">​</a></h2>
<p>The <code>sbatch</code> command is used to sumbit job scripts to the Slurm scheduler to be placed on the respective queue and to then begin when the requested resources are available.</p>
<p>Here is an example of using <code>sbatch</code> to submit a job file to the job scheduler.</p>
<blockquote>
<p><code>sbatch &lt;batchscript&gt;</code></p>
</blockquote>
<p>:: Tip
<code>sbatch</code> command is different from <code>SBATCH</code> directives. A directive is a way of specifiing how the job script should be configured in a certain aspect(i.e. max wall time, max core count, etc.). Visit <a href="#sbatch-directives-for-job-scripts">this sction</a> for further information on Slurm directives.
::</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slurm-script-main-parts">Slurm Script Main Parts<a href="#slurm-script-main-parts" class="hash-link" aria-label="Direct link to Slurm Script Main Parts" title="Direct link to Slurm Script Main Parts">​</a></h2>
<p>In creating a Slurm script, there are 4 main components in order for your job to be successfully processed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-shebang">1) Shebang<a href="#1-shebang" class="hash-link" aria-label="Direct link to 1) Shebang" title="Direct link to 1) Shebang">​</a></h3>
<p>The Shebang command tells the shell (which interprets the UNIX commands) to interpret and run the Slurm script using the bash shell.
This line should always be added at the very top of your SBATCH/Slurm script.</p>
<p>!/bin/bash</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-sbatch-directives-in-the-script-">2) <code>SBATCH</code> Directives in the Script <a href="#2-sbatch-directives-in-the-script-" class="hash-link" aria-label="Direct link to 2-sbatch-directives-in-the-script-" title="Direct link to 2-sbatch-directives-in-the-script-">​</a></h3>
<p>The <code>SBATCH</code> directives must be used in the following manner for Slurm to properly recognize them:</p>
<p>Template:</p>
<p>#SBATCH --[directive]</p>
<p>Example:</p>
<p>#SBATCH --job-name=EXAMPLEJOB
#SBATCH --nodes=2</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="common-directives">Common Directives<a href="#common-directives" class="hash-link" aria-label="Direct link to Common Directives" title="Direct link to Common Directives">​</a></h4>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--job-name=NAME</td><td>Specifies the name of the job.</td></tr><tr><td>--partition=PARTITION</td><td>Submits the job to a specific partition.</td></tr><tr><td>--nodes=N</td><td>Requests N nodes for the job.</td></tr><tr><td>--ntasks-per-node=N</td><td>Specifies the number of tasks to launch per node.</td></tr><tr><td>--mem=MB</td><td>Requests a specific amount of memory (in megabytes).</td></tr><tr><td>--time=DAYS:HOURS:MINUTES<!-- -->:SECONDS</td><td>Sets a limit on the total run time of the job.</td></tr><tr><td>--output=FILE_NAME</td><td>Designates a file to capture the standard output.</td></tr><tr><td>--error=FILE_NAME</td><td>Specifies a file to capture the standard error output.</td></tr></tbody></table>
<p>:: Tip
Please see <a href="#sbatch-directives-for-job-scripts">directive section</a> for a more complete list.
::</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-exporting-all-of-the-users-environment-for-job">3) Exporting All of the user&#x27;s environment for Job:<a href="#3-exporting-all-of-the-users-environment-for-job" class="hash-link" aria-label="Direct link to 3) Exporting All of the user&#x27;s environment for Job:" title="Direct link to 3) Exporting All of the user&#x27;s environment for Job:">​</a></h3>
<p>--export=all</p>
<p>This line will tell Slurm to export the current working enviroment to be used on the computing nodes to process the requested instructions. This line is important as it helps ensure consistancy across user&#x27;s working enviroment and the resources&#x27; working enviroment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-begin-to-include-list-of-commandsinstructions-to-execute-your-script">4) Begin to include list of commands/instructions to execute your script.<a href="#4-begin-to-include-list-of-commandsinstructions-to-execute-your-script" class="hash-link" aria-label="Direct link to 4) Begin to include list of commands/instructions to execute your script." title="Direct link to 4) Begin to include list of commands/instructions to execute your script.">​</a></h3>
<p>Here is where you can write the commands or instructions to execute the computations or calculations desired. Below is a small example of what instructions can look like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    pwd # Prints the working Directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    source activate env1 # conda activates an env called env1 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    python hello.py #runs a python program called hello.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="job-examples">Job Examples<a href="#job-examples" class="hash-link" aria-label="Direct link to Job Examples" title="Direct link to Job Examples">​</a></h3>
<p>More detailed job examples can be found <a href="/hpc_doc_new/docs/hpc-tutorials/running_jobs.md">here</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slurm---job-management">Slurm - Job Management<a href="#slurm---job-management" class="hash-link" aria-label="Direct link to Slurm - Job Management" title="Direct link to Slurm - Job Management">​</a></h2>
<p>Job management is critical before running or scaling jobs and computations within a HPC enviroment. We have created a manual page that can be found [ADDBACK MANAGEMENT LINK]. The documentation goes over common Slurm commands that help debug job errors and overall performance using <code>sacct</code> and <code>scontrol</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="job-arrays">Job Arrays<a href="#job-arrays" class="hash-link" aria-label="Direct link to Job Arrays" title="Direct link to Job Arrays">​</a></h2>
<p>Job arrays offer a mechanism for submitting and managing collections of similar jobs quickly and easily that utliizes only one job script. Job arrays are great at &quot;automating&quot; a repetetive job script that each time may only have input changes. Click [add back link] for the job array</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sbatch-directives-for-job-scripts">SBATCH Directives for Job Scripts<a href="#sbatch-directives-for-job-scripts" class="hash-link" aria-label="Direct link to SBATCH Directives for Job Scripts" title="Direct link to SBATCH Directives for Job Scripts">​</a></h2>
<table><thead><tr><th>Directives</th><th>Description</th></tr></thead><tbody><tr><td><code>--job-name &lt;jobname&gt;</code></td><td>Specifies a name for the job allocation. The specified name will appear along with the job id number when querying running jobs on the system. The default is the name of the batch script, or just sbatch if the script is read on sbatch’s standard input.</td></tr><tr><td><code>--output &lt;filename.out&gt;</code></td><td>Instructs Slurm to connect the batch script&#x27;s standard output directly to the filename. If not specified, the default filename is <code>slurm-jobID.out</code>.</td></tr><tr><td><code>--partition &lt;partition&gt;</code></td><td>Requests a specific partition for the resource allocation (<code>gpu</code>, <code>interactive</code>, <code>normal</code>). If not specified, the default partition is normal.</td></tr><tr><td><code>--cpus-per-task=&lt;number&gt;</code></td><td>Advises the Slurm controller that ensuing job steps will require n-cpus number of processors per task. Without this option, the controller will just try to assign one processor per task.</td></tr><tr><td><code>--mem-per-cpu=&lt;number&gt;</code></td><td>This is the minimum memory required per allocated CPU. Note: It’s highly recommended to specify <code>--mem-per-cpu</code>. If not, the default setting of 500MB will be assigned per CPU.</td></tr><tr><td><code>--time=&lt;D:H:M:S&gt;</code></td><td>Sets a limit on the total run time of the job allocation. If the requested time limit exceeds the partition’s time limit, the job will be left in a PENDING state (possibly indefinitely). The default time limit is the partition’s default time limit. A time limit of zero requests that no time limit be imposed. The acceptable time format is days-hours:minutes<!-- -->:seconds<!-- -->.</td></tr><tr><td><code>--mail-user=&lt;email&gt;</code></td><td>Defines user who will receive email notification of state changes as defined by <code>--mail-type</code>.</td></tr><tr><td><code>--mail-type=&lt;type&gt;</code></td><td>Notifies user by email when certain event types occur. Valid type values are BEGIN, END, FAIL. The user to be notified is indicated with <code>--mail-user</code>. The values of the <code>--mail-type</code> directive can be declared in one line like so: <code>--mail-type BEGIN, END, FAIL</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slurm-output-environment-variables">Slurm Output Environment Variables<a href="#slurm-output-environment-variables" class="hash-link" aria-label="Direct link to Slurm Output Environment Variables" title="Direct link to Slurm Output Environment Variables">​</a></h2>
<p>When a job scheduled by Slurm starts, it needs to know some information about its execution environment. For example, It needs to know the working directory, and what nodes allocated to it. Slurm passes this information to the running job via what so-called environment variables. The following is a table of the most common-used environment variable.</p>
<table><thead><tr><th>Slurm Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>SLURM_CPUS_ON_NODE</code></td><td>Number of CPUs on the allocated node.</td></tr><tr><td><code>SLURM_CPUS_PER_TASK</code></td><td>Number of CPUs requested per task.</td></tr><tr><td><code>SLURM_GPUS</code></td><td>Number of GPUs requested.</td></tr><tr><td><code>SLURM_GPUS_PER_NODE</code></td><td>Requested GPU count per allocated node.</td></tr><tr><td><code>SLURM_GPUS_PER_TASK</code></td><td>Requested GPU count per allocated task.</td></tr><tr><td><code>SLURM_JOB_ID</code></td><td>The ID of the job allocation.</td></tr><tr><td><code>SLURM_JOB_CPUS_PER_NODE</code></td><td>Count of processors available to the job on this node.</td></tr><tr><td><code>SLURM_JOB_NAME</code></td><td>Name of the job.</td></tr><tr><td><code>SLURM_JOB_NODELIST</code></td><td>List of nodes allocated to the job.</td></tr><tr><td><code>SLURM_JOB_NUM_NODES</code></td><td>Total number of nodes in the job&#x27;s resource allocation.</td></tr><tr><td><code>SLURM_JOB_PARTITION</code></td><td>Name of the partition in which the job is running.</td></tr><tr><td><code>SLURM_MEM_PER_CPU</code></td><td>Minimum memory required per allocated CPU.</td></tr><tr><td><code>SLURM_MEM_PER_GPU</code></td><td>Requested memory per allocated GPU.</td></tr><tr><td><code>SLURM_MEM_PER_NODE</code></td><td>Total amount of memory per node that the job needs.</td></tr><tr><td><code>SLURM_NODELIST</code></td><td>List of nodes allocated to the job.</td></tr><tr><td><code>SLURM_NPROCS</code></td><td>Total number of CPUs allocated</td></tr><tr><td><code>SLURM_NTASKS</code></td><td>Maximum number of MPI tasks (that&#x27;s processes).</td></tr><tr><td><code>SLURM_NTASKS_PER_CORE</code></td><td>Number of tasks requested per core.</td></tr><tr><td><code>SLURM_NTASKS_PER_GPU</code></td><td>Number of tasks requested per GPU.</td></tr><tr><td><code>SLURM_NTASKS_PER_NODE</code></td><td>Number of tasks requested per node.</td></tr><tr><td><code>SLURM_PRIO_PROCESS</code></td><td>The scheduling priority (nice value) at the time of job submission. This value is propagated to the spawned processes.</td></tr><tr><td><code>SLURM_PROCID</code></td><td>The MPI rank (or relative process ID) of the current process.</td></tr><tr><td><code>SLURM_SUBMIT_DIR</code></td><td>The directory from which SBATCH was invoked.</td></tr><tr><td><code>SLURM_SUBMIT_HOST</code></td><td>The Hostname of the computer from which SBATCH was invoked.</td></tr><tr><td><code>SLURM_TASK_PID</code></td><td>The process ID of the corresponding task.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/amirayuyue/hpc_doc_new/docs/hpc-tutorials/slurm.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/hpc_doc_new/docs/hpc-tutorials/hpc_vocab"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">HPC Vocabulary and Terminology</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/hpc_doc_new/docs/category/off-campus-high-performance-computing-resources"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Off Campus High Performance Computing Resources</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#slurm-commands" class="table-of-contents__link toc-highlight">Slurm Commands</a></li><li><a href="#sbatch-command" class="table-of-contents__link toc-highlight"><code>sbatch</code> Command</a></li><li><a href="#slurm-script-main-parts" class="table-of-contents__link toc-highlight">Slurm Script Main Parts</a><ul><li><a href="#1-shebang" class="table-of-contents__link toc-highlight">1) Shebang</a></li><li><a href="#2-sbatch-directives-in-the-script-" class="table-of-contents__link toc-highlight">2) <code>SBATCH</code> Directives in the Script </a></li><li><a href="#3-exporting-all-of-the-users-environment-for-job" class="table-of-contents__link toc-highlight">3) Exporting All of the user&#39;s environment for Job:</a></li><li><a href="#4-begin-to-include-list-of-commandsinstructions-to-execute-your-script" class="table-of-contents__link toc-highlight">4) Begin to include list of commands/instructions to execute your script.</a></li><li><a href="#job-examples" class="table-of-contents__link toc-highlight">Job Examples</a></li></ul></li><li><a href="#slurm---job-management" class="table-of-contents__link toc-highlight">Slurm - Job Management</a></li><li><a href="#job-arrays" class="table-of-contents__link toc-highlight">Job Arrays</a></li><li><a href="#sbatch-directives-for-job-scripts" class="table-of-contents__link toc-highlight">SBATCH Directives for Job Scripts</a></li><li><a href="#slurm-output-environment-variables" class="table-of-contents__link toc-highlight">Slurm Output Environment Variables</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/hpc_doc_new/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://ucmerced.service-now.com/servicehub" target="_blank" rel="noopener noreferrer" class="footer__link-item">ServiceNow Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ucmerced.zoom.us/j/89487493900" target="_blank" rel="noopener noreferrer" class="footer__link-item">Zoom Office Hours (Every Friday 11:3pm-1pm PT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://it.ucmerced.edu/CIRT" target="_blank" rel="noopener noreferrer" class="footer__link-item">CIRT UC Merced Home Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/hpc_doc_new/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 University of California, Merced HPC & JupyterHub Documentation, built with Docusaurus.</div></div></div></footer></div>
</body>
</html>